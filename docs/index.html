<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Neighborhood Bike Exchange</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <h1>Neighborhood Bike Exchange</h1>
    <p>Draft listing flow for local bicycle trading.</p>
  </header>
  <main>
    <section class="form-section">
      <h2>Create a Bicycle Listing</h2>
      <form id="listing-form">
        <div class="field">
          <label for="title">Listing Title</label>
          <input id="title" name="title" type="text" required maxlength="80" placeholder="e.g. Commuter bike in great shape">
        </div>
        <div class="field">
          <label for="price">Price (USD)</label>
          <input id="price" name="price" type="number" required min="0" step="0.01" placeholder="150">
        </div>
        <div class="field">
          <label for="area">Local Area</label>
          <input id="area" name="area" type="text" required maxlength="80" placeholder="e.g. Downtown West, Riverfront">
        </div>
        <div class="field">
          <label for="description">Description</label>
          <textarea id="description" name="description" required rows="4" placeholder="Share condition, upgrades, and pickup details."></textarea>
        </div>
        <div class="field">
          <label for="photo">Main Photo</label>
          <input id="photo" name="photo" type="file" accept="image/*" required>
          <p class="field-help">Select a clear photo. JPEG or PNG preferred, up to 5 MB.</p>
        </div>
        <div class="photo-preview" id="photo-preview" aria-live="polite">
          <span class="placeholder">Photo preview will appear here.</span>
        </div>
        <button type="submit" class="primary-button">Publish Listing</button>
      </form>
    </section>
    <section class="feed-section">
      <h2>Local Listings Feed</h2>
      <p id="empty-state" class="empty-state">Once you publish a listing, it will appear here for local testing.</p>
      <div id="listings" class="listing-grid" aria-live="polite"></div>
    </section>
  </main>
  <script src="main.js" defer></script>
<script data-pronto-nav="guard">
(function () {
  if (window.__prontoNavGuard) {
    return;
  }
  window.__prontoNavGuard = true;

  function hasRoute(el) {
    return el && el.getAttribute && el.getAttribute("data-route");
  }

  function show(route) {
    var views = Array.prototype.slice.call(document.querySelectorAll("[data-view]"));
    var matched = false;
    views.forEach(function (view) {
      var isTarget = view.getAttribute("data-view") === route;
      if (isTarget) {
        matched = true;
      }
      view.classList.toggle("is-active", isTarget);
      view.setAttribute("aria-hidden", String(!isTarget));
      if (isTarget && typeof view.scrollIntoView === "function") {
        view.scrollIntoView({ block: "start", behavior: "smooth" });
      }
    });
    return matched;
  }

  document.addEventListener(
    "click",
    function (event) {
      var target = event.target instanceof Element ? event.target.closest("[data-route], a") : null;
      if (!target) {
        return;
      }

      if (hasRoute(target)) {
        var route = target.getAttribute("data-route");
        if (route) {
          event.preventDefault();
          if (!show(route)) {
            document.dispatchEvent(
              new CustomEvent("pronto:navigate", {
                detail: { route: route, source: "prototype" },
              }),
            );
          }
        }
        return;
      }

      if (target.tagName === "A") {
        var href = target.getAttribute("href") || "";
        if (href && href.charAt(0) === "/" && !href.startsWith("//")) {
          event.preventDefault();
        }
      }
    },
    true,
  );
})();
</script>
</body>
</html>